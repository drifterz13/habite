<% content_for :title, "Task #{@task.id}" %>

<%= turbo_frame_tag "task_detail" do %>
  <article class="container">
    <h4 class="d-flex align-items-center gap-2">
      <%= image_tag "icons/task_scroll.png", size: "24x24", alt: "task scroll icon" %>
      <%= @task.title %>
    </h4>

    <section>
      <p><%= @task.description %></p>

      <%= button_to "Complete Task",
      complete_quest_task_path(@task.quest, @task),
      method: :patch,
      class: "btn btn-primary",
      disabled: !@player.can_complete_task?(@task),
      data: {
        turbo_frame: "_top",
      } %>

      <% if @player.has_completed_task? @task %>
        <p class="fw-light fs-6">
          completed at:
          <%= time_ago_in_words @player.player_tasks.completed_time_of(@task) %>
          ago
        </p>
      <% end %>
    </section>
  </article>
<% end %>
